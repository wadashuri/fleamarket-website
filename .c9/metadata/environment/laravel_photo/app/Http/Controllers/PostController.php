{"filter":false,"title":"PostController.php","tooltip":"/laravel_photo/app/Http/Controllers/PostController.php","ace":{"folds":[],"scrolltop":956.5,"scrollleft":0,"selection":{"start":{"row":127,"column":7},"end":{"row":127,"column":7},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":64,"state":"php-start","mode":"ace/mode/php"}},"hash":"751d97787b9d55d1a2ec9cac48f26c31d4e64a62","mime":"application/octet-stream","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":102,"column":6},"end":{"row":127,"column":7},"action":"remove","lines":["public function updateImage($id, PostImageRequest $request){"," ","        //画像投稿処理","        $path = '';","        $image = $request->file('image');"," ","        if( isset($image) === true ){","            // publicディスク(storage/app/public/)のphotosディレクトリに保存","            $path = $image->store('photos', 'public');","        }"," ","        $post = Post::find($id);"," ","        // 変更前の画像の削除","        if($post->image !== ''){","          // publicディスクから、該当の投稿画像($post->image)を削除","          \\Storage::disk('public')->delete(\\Storage::url($post->image));","        }"," ","        $post->update([","          'image' => $path, // ファイル名を保存","        ]);"," ","        session()->flash('success', '画像を変更しました');","        return redirect()->route('posts.index');","      }"],"id":1183},{"start":{"row":102,"column":6},"end":{"row":127,"column":7},"action":"insert","lines":[" public function updateImage($id, PostImageRequest $request){"," ","        //画像投稿処理","        $path = '';","        $image = $request->file('image');"," ","        if( isset($image) === true ){","            // publicディスク(storage/app/public/)のphotosディレクトリに保存","            $path = $image->store('photos', 'public');","        }"," ","        $post = Post::find($id);"," ","        // 変更前の画像の削除","        if($post->image !== ''){","          // publicディスクから、該当の投稿画像($post->image)を削除","          \\Storage::disk('public')->delete(\\Storage::url($post->image));","        }"," ","        $post->update([","          'image' => $path, // ファイル名を保存","        ]);"," ","        session()->flash('success', '画像を変更しました');","        return redirect()->route('posts.index');","      }"]}]]},"timestamp":1635232059026}